{"version":3,"sources":["webpack:///static/js/app.f36f97d29ffd3b37918e.js","webpack:///./src/config.js","webpack:///./src/router/index.js","webpack:///./src/App.vue?fc6a","webpack:///./src/main.js","webpack:///App.vue","webpack:///Childselection.vue","webpack:///Home.vue","webpack:///Nodeinfo.vue","webpack:///Simulationview.vue","webpack:///Tradegraph.vue","webpack:///Tradeview.vue","webpack:///./src/components/Childselection.vue","webpack:///./src/components/Home.vue","webpack:///./src/components/Nodeinfo.vue","webpack:///./src/components/Simulationview.vue","webpack:///./src/components/Tradegraph.vue?1f1a","webpack:///./src/components/Tradeview.vue","webpack:///./src/components/Home.vue?0f31","webpack:///./src/App.vue?0c03","webpack:///./src/components/Childselection.vue?3e79","webpack:///./src/components/Tradegraph.vue?e0fc","webpack:///./src/components/Simulationview.vue?e1da","webpack:///./src/components/Tradeview.vue?9ddb","webpack:///./src/components/Nodeinfo.vue?f255"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","apiURL","xhrConfig","mode","handleFetchErrors","response","ok","Error","statusText","alertError","error","alert","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_Home__","__WEBPACK_IMPORTED_MODULE_2__components_Home___default","n","__WEBPACK_IMPORTED_MODULE_3__components_Simulationview__","__WEBPACK_IMPORTED_MODULE_3__components_Simulationview___default","__WEBPACK_IMPORTED_MODULE_4__components_Tradeview__","__WEBPACK_IMPORTED_MODULE_4__components_Tradeview___default","use","routes","path","name","component","a","exports","injectStyle","ssrContext","Component","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","render","h","__WEBPACK_IMPORTED_MODULE_0__config__","props","data","loading","children","selectedChildren","computed","activeNodeArray","this","activenodes","split","watch","show","_this","fetch","simulationid","simulationday","childrenof","then","json","forEach","child","push","label","activeChildren","filter","x","includes","catch","methods","saveSelection","_this2","newActiveNodes","concat","$emit","join","cancelSelection","simulations","created","sims","info","agent","closeInfo","loadingRanking","simDescription","ranking","$route","query","sim","list","__WEBPACK_IMPORTED_MODULE_0_d3__","graph","stage","firmNodes","firmsTree","firmsTreeOffset","firmsTreeDirection","consumersNodes","consumersTree","consumersTreeOffset","consumersTreeDirection","nodeCoordinates","NODE_RADIUS","NODE_RADIUS_BASE","INTER_LAYER_GAP","INTRA_LAYER_GAP","HORIZONTAL_GAP","mounted","updateTradegraph","graphdata","stratifyData","firms","consumerNodes","consumers","calculateNodeCoordinates","drawLinks","edges","drawNodes","addClickToNodes","on","id","nodeData","treeData","d","parentId","parent","previousDepth","layerIterator","rootOffset","horizontalDistance","accumulatedLayerGap","descendants","i","depth","y","size","_this3","self","type","nodesJoin","selectAll","exit","remove","nodesEnterJoin","enter","group","append","attr","color","groupJoin","merge","classed","selectednode","select","transition","offsetCoefficient","offsetConstant","text","links","_this4","length","currentSource","source","currentDestination","destination","globalSourceX","globalSourceY","globalDestinationX","globalDestinationY","deltaX","deltaY","alpha","localEdgeCount","linksJoin","linksEnterJoin","each","rotationCorrection","Math","atan","PI","radiusSource","radiusDestination","j","deltaXLocal","cos","x0","y0","sin","x1","y1","cx0","cx1","cy0","cy1","weight","__WEBPACK_IMPORTED_MODULE_0__components_Tradegraph__","__WEBPACK_IMPORTED_MODULE_0__components_Tradegraph___default","__WEBPACK_IMPORTED_MODULE_1__components_Childselection__","__WEBPACK_IMPORTED_MODULE_1__components_Childselection___default","__WEBPACK_IMPORTED_MODULE_2__components_Nodeinfo__","__WEBPACK_IMPORTED_MODULE_2__components_Nodeinfo___default","__WEBPACK_IMPORTED_MODULE_3__config__","components","Tradegraph","Childselection","Nodeinfo","apiUrl","tradeGraphData","loaded","playing","playInterval","metrics","selectedNode","selected","showNodeInfo","infoOf","showChildSelection","childrenOf","selectedMetric","simId","simDay","parseInt","day","simAgents","agents","simStep","step","simLength","fetchData","days","element","setInterval","nextStep","clearInterval","goToNewDay","min","prevStep","max","$router","replace","handleNodeClicked","node","handleShowInfo","handleShowChildren","handleSetActiveNodes","nodes","_vm","_h","$createElement","_c","_self","_v","_e","_l","attrs","to","_s","staticRenderFns","directives","rawName","expression","domProps","checked","Array","isArray","_i","__c","$event","$$a","$$el","target","$$c","$$v","$$i","slice","click","staticClass","xmlns","href","rank","modifiers","number","input","composing","_n","blur","$forceUpdate","change","$$selectedVal","prototype","call","options","o","map","_value","multiple","disabled","option","nodeclicked","showinfo","showchildren","update:show","setactivenodes","key"],"mappings":"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","file":"static/js/app.f36f97d29ffd3b37918e.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  apiURL: 'http://192.168.79.102:8080',\n  xhrConfig: {\n    mode: 'cors'\n  },\n  handleFetchErrors: function handleFetchErrors(response) {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response;\n  },\n  alertError: function alertError(error) {\n    // eslint-disable-next-line no-alert\n    alert(error);\n  }\n});\n\n/***/ }),\n/* 2 */,\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Home__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Home___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_Home__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_Simulationview__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_Simulationview___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_Simulationview__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_Tradeview__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_Tradeview___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_Tradeview__);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  mode: 'history',\n  routes: [{\n    path: '/',\n    name: 'home',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Home___default.a\n  }, {\n    path: '/simulation',\n    name: 'simulation',\n    component: __WEBPACK_IMPORTED_MODULE_3__components_Simulationview___default.a\n  }, {\n    path: '/trades',\n    name: 'trades',\n    component: __WEBPACK_IMPORTED_MODULE_4__components_Tradeview___default.a\n  }]\n}));\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(14)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(6),\n  /* template */\n  __webpack_require__(24),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(3);\n\n\n\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App___default.a);\n  }\n});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(1);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'childrenselection',\n  props: ['show', 'childrenof', 'activenodes', 'simulationday', 'simulationid'],\n  data: function data() {\n    return {\n      loading: true,\n      children: [],\n      selectedChildren: []\n    };\n  },\n\n  computed: {\n    activeNodeArray: function activeNodeArray() {\n      return this.activenodes.split(',');\n    }\n  },\n  watch: {\n    show: function show() {\n      var _this = this;\n\n      if (this.show) {\n        // get children\n        this.loading = true;\n\n        fetch(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].apiURL + '/children?sim=' + this.simulationid + '&day=' + this.simulationday + '&selection=' + this.childrenof, __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n          return response.json();\n        }).then(function (response) {\n          // set children\n          _this.children = [];\n          response.children.forEach(function (child) {\n            return _this.children.push(child.label);\n          });\n\n          // set activeChildren\n          _this.activeChildren = _this.children.filter(function (x) {\n            return _this.activeNodeArray.includes(x);\n          });\n\n          _this.loading = false;\n        }).catch(function (error) {\n          return __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].alertError(error);\n        });\n      }\n    }\n  },\n  methods: {\n    saveSelection: function saveSelection() {\n      var _this2 = this;\n\n      // construct new set of active nodes\n      // take all active nodes without children\n      var newActiveNodes = this.activeNodeArray.filter(function (x) {\n        return !_this2.children.includes(x);\n      });\n      // push active children to new set\n      newActiveNodes = newActiveNodes.concat(this.activeChildren);\n\n      this.$emit('setactivenodes', newActiveNodes.join());\n\n      this.$emit('update:show', false);\n    },\n    cancelSelection: function cancelSelection() {\n      this.$emit('update:show', false);\n    }\n  }\n});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(1);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'home',\n  data: function data() {\n    return {\n      loading: true,\n      simulations: null\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // get simulations\n    fetch(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].apiURL + '/list', __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      _this.simulations = response.sims;\n      _this.loading = false;\n    }).catch(function (error) {\n      return __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].alertError(error);\n    });\n  }\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(1);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'nodeinfo',\n  props: ['show', 'agent', 'simulationday', 'simulationid'],\n  data: function data() {\n    return {\n      loading: true,\n      info: {}\n    };\n  },\n\n  watch: {\n    show: function show() {\n      var _this = this;\n\n      if (this.show) {\n        // get children\n        this.loading = true;\n\n        fetch(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].apiURL + '/agents?sim=' + this.simulationid + '&day=' + this.simulationday + '&selection=' + this.agent, __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n          return response.json();\n        }).then(function (response) {\n          _this.info = response;\n          _this.loading = false;\n        }).catch(function (error) {\n          return __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].alertError(error);\n        });\n      }\n    }\n  },\n  methods: {\n    closeInfo: function closeInfo() {\n      this.$emit('update:show', false);\n    }\n  }\n});\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(1);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'simulationview',\n  data: function data() {\n    return {\n      loading: true,\n      loadingRanking: true,\n      simDescription: '',\n      ranking: null\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // get simulation info\n    fetch(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].apiURL + '/info?sim=' + this.$route.query.sim, __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      _this.simDescription = response.name;\n      _this.loading = false;\n    }).catch(function (error) {\n      return __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].alertError(error);\n    });\n\n    // get simulation ranking\n    fetch(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].apiURL + '/ranking?sim=' + this.$route.query.sim, __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      _this.ranking = response.list;\n      _this.loadingRanking = false;\n    }).catch(function (error) {\n      return __WEBPACK_IMPORTED_MODULE_0__config__[\"a\" /* default */].alertError(error);\n    });\n  }\n});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'tradegraph',\n  props: ['graphdata', 'selectednode'],\n  data: function data() {\n    return {\n      graph: {\n        stage: null,\n        firmNodes: null,\n        firmsTree: null,\n        firmsTreeOffset: [1000, 100],\n        firmsTreeDirection: +1,\n        consumersNodes: null,\n        consumersTree: null,\n        consumersTreeOffset: [700, 100],\n        consumersTreeDirection: -1,\n        // object that stores coordinates of all nodes\n        // used to draw links between nodes\n        nodeCoordinates: {},\n        NODE_RADIUS: 50,\n        NODE_RADIUS_BASE: 2,\n        INTER_LAYER_GAP: 50,\n        INTRA_LAYER_GAP: 10,\n        HORIZONTAL_GAP: 50\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.graph.stage = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"]('#stage');\n    this.updateTradegraph();\n  },\n\n  watch: {\n    graphdata: function graphdata() {\n      this.updateTradegraph();\n    }\n  },\n  methods: {\n    updateTradegraph: function updateTradegraph() {\n      this.graph.firmNodes = this.stratifyData(this.graphdata.firms);\n      this.graph.consumerNodes = this.stratifyData(this.graphdata.consumers);\n\n      // clear and updates global nodeCoordinates\n      this.graph.nodeCoordinates = {};\n      this.calculateNodeCoordinates(this.graph.firmNodes);\n      this.calculateNodeCoordinates(this.graph.consumerNodes);\n\n      this.drawLinks(this.graphdata.edges);\n\n      this.drawNodes(this.graph.firmNodes);\n      this.drawNodes(this.graph.consumerNodes);\n    },\n    addClickToNodes: function addClickToNodes() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"selectAll\"]('.node').on('click', function (el) {\n        return _this.$emit('nodeclicked', el.data.id);\n      });\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"selectAll\"]('.childrenselection').on('click', function (el) {\n        return _this.$emit('showchildren', el.data.id);\n      });\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"selectAll\"]('.infoselection').on('click', function (el) {\n        return _this.$emit('showinfo', el.data.id);\n      });\n    },\n    stratifyData: function stratifyData(nodeData) {\n      // stratify data\n      var treeData = __WEBPACK_IMPORTED_MODULE_0_d3__[\"stratify\"]().id(function (d) {\n        return d.label;\n      }).parentId(function (d) {\n        return d.parent;\n      })(nodeData);\n\n      // get nodes in hierarchical structure\n      return __WEBPACK_IMPORTED_MODULE_0_d3__[\"hierarchy\"](treeData, function (d) {\n        return d.children;\n      });\n    },\n    calculateNodeCoordinates: function calculateNodeCoordinates(nodeData) {\n      var _this2 = this;\n\n      var previousDepth = 0;\n      var layerIterator = 0;\n      var rootOffset = void 0;\n      var horizontalDistance = void 0;\n      var accumulatedLayerGap = -this.graph.INTRA_LAYER_GAP;\n\n      // check what tree we are updating and\n      // set corresponding offset and horizontal distance\n      if (nodeData.data.id === 'firms') {\n        rootOffset = this.graph.firmsTreeOffset;\n        horizontalDistance = this.graph.firmsTreeDirection * this.graph.HORIZONTAL_GAP;\n      } else if (nodeData.data.id === 'consumers') {\n        rootOffset = this.graph.consumersTreeOffset;\n        horizontalDistance = this.graph.consumersTreeDirection * this.graph.HORIZONTAL_GAP;\n      }\n\n      nodeData.descendants().forEach(function (d, i) {\n        // set x coordinate\n        if (d.depth === previousDepth && i !== 0) {\n          layerIterator += 1;\n          d.data.x = rootOffset[0] + layerIterator * horizontalDistance;\n        } else {\n          d.data.x = rootOffset[0];\n          layerIterator = 0;\n          accumulatedLayerGap += 15;\n        }\n        // set y coordinate\n        d.data.y = _this2.graph.INTER_LAYER_GAP * i + accumulatedLayerGap + rootOffset[1];\n\n        // update previousDepth\n        previousDepth = d.depth;\n\n        // update nodeCoordinates for later use\n        // in drawLinks function\n        _this2.graph.nodeCoordinates[d.data.id] = { x: d.data.x, y: d.data.y, size: d.data.data.size };\n      });\n    },\n    drawNodes: function drawNodes(nodeData) {\n      var _this3 = this;\n\n      var self = this;\n      var type = nodeData.data.id === 'firms' ? 'firms' : 'consumers';\n\n      // d3.selectAll(`.node--${nodeData.data.id}`).remove();\n\n      // create joins\n      var nodesJoin = this.graph.stage.selectAll('.node--' + nodeData.data.id).data(nodeData.descendants());\n\n      // exit join\n      nodesJoin.exit().remove();\n\n      // add group elements in enter join\n      var nodesEnterJoin = nodesJoin.enter();\n\n      var group = nodesEnterJoin.append('g').attr('id', function (d) {\n        return d.data.id;\n      }).attr('class', function (d) {\n        return 'node node--' + nodeData.data.id + ' ' + (d.children ? 'branch' : 'leaf');\n      });\n\n      // append node edges\n      group.append('path').attr('class', 'node__edge').attr('d', function (d, i) {\n        if (i > 0) {\n          return 'M 0 0 L' + (d.parent.data.x - d.data.x) + ' ' + (d.parent.data.y - d.data.y);\n        }\n        return '';\n      });\n\n      // append node to node group\n      var color = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scaleOrdinal\"](__WEBPACK_IMPORTED_MODULE_0_d3__[\"schemeCategory10\"]);\n      group.append('circle').attr('class', 'node__circle').attr('cx', 0).attr('cy', 0).attr('fill', function (d, i) {\n        return color(i);\n      });\n\n      // append labels to node group\n      group.append('text').attr('class', 'node__text').attr('text-anchor', function () {\n        if (type === 'firms') {\n          return 'start';\n        }\n        return 'end';\n      });\n\n      // TODO: add proper UI element to select children\n      group.append('circle').attr('class', 'childrenselection').attr('r', '4px').attr('cx', '-20px').attr('cy', '-10px');\n\n      // TODO: add proper UI element to select info\n      group.append('circle').attr('class', 'infoselection').attr('r', '4px').attr('cx', '-20px').attr('cy', '10px');\n\n      // merge enter join with update\n      // transform nodes to calculated position\n      var groupJoin = nodesJoin.merge(group)\n      // classed accepts true or false as second argument\n      .classed('node--out', function (d) {\n        return _this3.selectednode && d.data.id !== _this3.selectednode;\n      }).attr('transform', function (d) {\n        return 'translate(' + self.graph.nodeCoordinates[d.data.id].x + ',\\n            ' + self.graph.nodeCoordinates[d.data.id].y + ')';\n      });\n\n      groupJoin.select('.node__circle').transition().attr('r', function (d) {\n        return self.graph.NODE_RADIUS_BASE * d.data.data.size;\n      });\n\n      groupJoin.select('.node__text').transition().attr('dx', function (d) {\n        var offsetCoefficient = -0.5;\n        var offsetConstant = -0.5;\n        if (type === 'firms') {\n          offsetCoefficient = 0.5;\n          offsetConstant = 0.5;\n        }\n        return self.graph.NODE_RADIUS_BASE * d.data.data.size * offsetCoefficient + offsetConstant;\n      }).attr('dy', function (d) {\n        return -5 + -1 * (self.graph.NODE_RADIUS_BASE * d.data.data.size);\n      }).text(function (d) {\n        return d.data.id;\n      });\n\n      // add click events to nodes\n      this.addClickToNodes();\n    },\n    drawLinks: function drawLinks(links) {\n      var _this4 = this;\n\n      // remove all groups and defs\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"selectAll\"]('.links__wrapper').remove();\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"selectAll\"]('defs').remove();\n\n      if (links.length > 0) {\n        var currentSource = links[0].source;\n        var currentDestination = links[0].destination;\n\n        var globalSourceX = 0;\n        var globalSourceY = 0;\n        var globalDestinationX = 0;\n        var globalDestinationY = 0;\n        var deltaX = 0;\n        var deltaY = 0;\n        var alpha = 0;\n        var xSource = 0;\n        var ySource = 0;\n        var localEdgeCount = 0;\n\n        // create initial group to append links to\n        var group = this.graph.stage.append('g').attr('class', 'links__wrapper');\n\n        // create the enter join\n        var linksJoin = group.selectAll('.link').data(links);\n\n        // exit join\n        linksJoin.exit().remove();\n\n        var linksEnterJoin = linksJoin.enter();\n\n        linksJoin.merge(linksEnterJoin).each(function (d, i) {\n          if (d.source === currentSource && d.destination === currentDestination && i !== 0) {\n            localEdgeCount += 1;\n          } else {\n            localEdgeCount = 0;\n            // create new svg group\n            // note: first group has already been created\n            if (i !== 0) {\n              group = _this4.graph.stage.append('g').attr('class', 'links__wrapper');\n            }\n\n            globalSourceX = _this4.graph.nodeCoordinates[d.source].x;\n            globalSourceY = _this4.graph.nodeCoordinates[d.source].y;\n\n            globalDestinationX = _this4.graph.nodeCoordinates[d.destination].x;\n            globalDestinationY = _this4.graph.nodeCoordinates[d.destination].y;\n\n            deltaX = globalDestinationX - globalSourceX;\n            deltaY = globalDestinationY - globalSourceY;\n            var rotationCorrection = 0;\n\n            alpha = Math.atan(deltaY / deltaX) * (180 / Math.PI);\n\n            if (deltaX < 0) {\n              rotationCorrection = -180;\n            }\n            alpha += rotationCorrection;\n\n            group.attr('transform', 'translate(' + globalSourceX + ', ' + globalSourceY + ') rotate(' + alpha + ')');\n\n            currentSource = d.source;\n            currentDestination = d.destination;\n          }\n\n          var radiusSource = _this4.graph.NODE_RADIUS_BASE * _this4.graph.nodeCoordinates[d.source].size || _this4.graph.NODE_RADIUS;\n          var radiusDestination = _this4.graph.NODE_RADIUS_BASE * _this4.graph.nodeCoordinates[d.destination].size || _this4.graph.NODE_RADIUS;\n          var j = localEdgeCount + 2;\n          var deltaXLocal = deltaX / Math.cos(alpha * Math.PI / 180);\n          // 0.3 rad ^= 17.2 deg\n          var x0 = xSource + radiusSource * Math.cos((localEdgeCount + 1) * 0.3);\n          var y0 = ySource - radiusSource * Math.sin((localEdgeCount + 1) * 0.3);\n          var x1 = deltaXLocal;\n          x1 -= (radiusDestination + 8) * Math.cos((localEdgeCount + 1) * 0.3);\n          var y1 = -(radiusDestination + 8) * Math.sin((localEdgeCount + 1) * 0.3);\n\n          var cx0 = j * x0;\n          var cx1 = j * (x1 - deltaXLocal) + deltaXLocal;\n          var cy0 = j * y0;\n          var cy1 = j * y1;\n\n          // append the bezier curve and marker\n          group.append('path').attr('class', 'link').attr('d', 'M ' + x0 + ' ' + y0 + ' C ' + cx0 + ' ' + cy0 + ', ' + cx1 + ' ' + cy1 + ', ' + x1 + ' ' + y1).attr('stroke-width', d.weight + 'px').attr('marker-end', function () {\n            return 'url(#marker)';\n          });\n        });\n\n        // create reference marker\n        this.graph.stage.append('defs').append('marker').attr('id', 'marker').attr('class', 'marker').attr('viewBox', '0 -5 10 10').attr('refX', 0).attr('refY', 0).attr('markerWidth', 10).attr('markerHeight', 10).attr('orient', 'auto').attr('markerUnits', 'userSpaceOnUse').append('path').attr('d', 'M0,-5L10,0L0,5');\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Tradegraph__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Tradegraph___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_Tradegraph__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_Childselection__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_Childselection___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_Childselection__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Nodeinfo__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Nodeinfo___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_Nodeinfo__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__(1);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'tradeview',\n  components: {\n    Tradegraph: __WEBPACK_IMPORTED_MODULE_0__components_Tradegraph___default.a,\n    Childselection: __WEBPACK_IMPORTED_MODULE_1__components_Childselection___default.a,\n    Nodeinfo: __WEBPACK_IMPORTED_MODULE_2__components_Nodeinfo___default.a\n  },\n  data: function data() {\n    return {\n      apiUrl: __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].apiURL,\n      tradeGraphData: null,\n      loaded: false,\n      playing: false,\n      playInterval: null,\n      metrics: ['ALL'],\n      selectedNode: this.$route.query.selected,\n      showNodeInfo: false,\n      infoOf: null,\n      showChildSelection: false,\n      childrenOf: null,\n      selectedMetric: '',\n      simId: this.$route.query.sim,\n      simDay: parseInt(this.$route.query.day, 10),\n      simAgents: this.$route.query.agents,\n      simStep: parseInt(this.$route.query.step, 10),\n      simLength: null\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // get simulation data\n    this.fetchData();\n\n    // get length of simulation\n    fetch(this.apiUrl + '/info?sim=' + this.simId, __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      _this.simLength = response.days;\n    }).catch(function (error) {\n      return __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].alertError(error);\n    });\n\n    // get download options\n    fetch(this.apiUrl + '/metrics', __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      response.metrics.forEach(function (element) {\n        _this.metrics.push(element);\n      });\n    }).catch(function (error) {\n      return __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].alertError(error);\n    });\n  },\n\n  watch: {\n    // call fetchData when the route changes\n    $route: 'fetchData',\n    playing: function playing() {\n      if (this.playing) {\n        this.playInterval = setInterval(this.nextStep, 100);\n      } else {\n        clearInterval(this.playInterval);\n      }\n    },\n    simDay: function simDay() {\n      this.goToNewDay();\n    },\n    simAgents: function simAgents() {\n      this.goToNewDay();\n    }\n  },\n  methods: {\n    nextStep: function nextStep() {\n      this.simDay = Math.min(this.simDay + this.simStep, this.simLength);\n      if (this.simDay === this.simLength) {\n        this.playing = false;\n      }\n    },\n    prevStep: function prevStep() {\n      this.simDay = Math.max(this.simDay - this.simStep, 0);\n    },\n    goToNewDay: function goToNewDay() {\n      this.$router.replace({\n        name: 'trades',\n        query: {\n          sim: this.simId,\n          day: this.simDay,\n          agents: this.simAgents,\n          step: this.simStep,\n          selected: this.selectedNode\n        }\n      });\n    },\n    fetchData: function fetchData() {\n      var _this2 = this;\n\n      // fetchData has all needed state data in URL\n      fetch(this.apiUrl + '/tradegraph?sim=' + this.simId + '&day=' + this.simDay + '&agents=' + this.simAgents + '&step=' + this.simStep, __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].xhrConfig).then(__WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].handleFetchErrors).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        _this2.tradeGraphData = response;\n        _this2.loaded = true;\n      }).catch(function (error) {\n        return __WEBPACK_IMPORTED_MODULE_3__config__[\"a\" /* default */].alertError(error);\n      });\n    },\n    handleNodeClicked: function handleNodeClicked(node) {\n      if (this.selectedNode && this.selectedNode === node) {\n        this.selectedNode = null;\n      } else {\n        this.selectedNode = node;\n      }\n      this.goToNewDay();\n    },\n    handleShowInfo: function handleShowInfo(node) {\n      this.infoOf = node;\n      this.showNodeInfo = true;\n    },\n    handleShowChildren: function handleShowChildren(node) {\n      this.childrenOf = node;\n      this.showChildSelection = true;\n    },\n    handleSetActiveNodes: function handleSetActiveNodes(nodes) {\n      this.simAgents = nodes;\n    }\n  }\n});\n\n/***/ }),\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(7),\n  /* template */\n  __webpack_require__(25),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(8),\n  /* template */\n  __webpack_require__(23),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(9),\n  /* template */\n  __webpack_require__(29),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(10),\n  /* template */\n  __webpack_require__(27),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(15)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(11),\n  /* template */\n  __webpack_require__(26),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(16)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(12),\n  /* template */\n  __webpack_require__(28),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"Simulations\")]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('ul', _vm._l((_vm.simulations), function(sim) {\n    return _c('li', [_c('router-link', {\n      attrs: {\n        \"to\": {\n          name: 'simulation',\n          query: {\n            sim: sim.path\n          }\n        }\n      }\n    }, [_vm._v(_vm._s(((sim.owner) + \" / \" + (sim.path))))])], 1)\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('ul', [_c('li', [_c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'home'\n      }\n    }\n  }, [_vm._v(\"Simulations\")])], 1)]), _vm._v(\" \"), _c('router-view')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('div', [_c('h2', [_vm._v(\"Childselection \" + _vm._s(_vm.childrenof) + \" on day \" + _vm._s(_vm.simulationday))]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading ...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('div', [_c('ul', _vm._l((_vm.children), function(child) {\n    return _c('li', [_c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.activeChildren),\n        expression: \"activeChildren\"\n      }],\n      attrs: {\n        \"type\": \"checkbox\",\n        \"name\": \"selection\"\n      },\n      domProps: {\n        \"value\": child,\n        \"checked\": Array.isArray(_vm.activeChildren) ? _vm._i(_vm.activeChildren, child) > -1 : (_vm.activeChildren)\n      },\n      on: {\n        \"__c\": function($event) {\n          var $$a = _vm.activeChildren,\n            $$el = $event.target,\n            $$c = $$el.checked ? (true) : (false);\n          if (Array.isArray($$a)) {\n            var $$v = child,\n              $$i = _vm._i($$a, $$v);\n            if ($$el.checked) {\n              $$i < 0 && (_vm.activeChildren = $$a.concat($$v))\n            } else {\n              $$i > -1 && (_vm.activeChildren = $$a.slice(0, $$i).concat($$a.slice($$i + 1)))\n            }\n          } else {\n            _vm.activeChildren = $$c\n          }\n        }\n      }\n    }), _vm._v(\" \" + _vm._s(child) + \"\\n      \")])\n  })), _vm._v(\" \"), _c('div', [_vm._v(_vm._s(_vm.activeNodeArray))])]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('button', {\n    on: {\n      \"click\": _vm.saveSelection\n    }\n  }, [_vm._v(\"Save\")]) : _vm._e(), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.cancelSelection\n    }\n  }, [_vm._v(\"Cancel\")])]) : _vm._e()\n},staticRenderFns: []}\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('svg', {\n    staticClass: \"tradegraph\",\n    attrs: {\n      \"id\": \"stage\",\n      \"xmlns\": \"http://www.w3.org/2000/svg\"\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"Simulation '\" + _vm._s(this.$route.query.sim) + \"'\")]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('ul', [_c('li', [_c('a', {\n    attrs: {\n      \"href\": _vm.simDescription,\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Description\")])]), _vm._v(\" \"), _c('li', [_c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'trades',\n        query: {\n          sim: this.$route.query.sim,\n          day: 0,\n          agents: 'consumers,firms',\n          step: 1\n        }\n      }\n    }\n  }, [_vm._v(\"Tradeview\")])], 1)]) : _vm._e(), _vm._v(\" \"), (!_vm.loadingRanking) ? _c('ol', _vm._l((_vm.ranking), function(rank) {\n    return _c('li', [_vm._v(\"\\n      \" + _vm._s(((rank.type) + \": \" + (rank.averageUtility))) + \"\\n    \")])\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"Tradeview\")]), _vm._v(\" \"), (_vm.loaded) ? _c('div', [(_vm.simDay > 0) ? _c('button', {\n    on: {\n      \"click\": _vm.prevStep\n    }\n  }, [_vm._v(\"<\")]) : _vm._e(), _vm._v(\" \"), (_vm.simDay < _vm.simLength) ? _c('button', {\n    on: {\n      \"click\": _vm.nextStep\n    }\n  }, [_vm._v(\">\")]) : _vm._e(), _vm._v(\" \"), (_vm.simDay < _vm.simLength) ? _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.playing = !_vm.playing\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.playing ? '||' : '|>'))]) : _vm._e(), _vm._v(\" \"), (_vm.simDay > 0) ? _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.simDay = 0\n      }\n    }\n  }, [_vm._v(\"<<\")]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.number\",\n      value: (_vm.simDay),\n      expression: \"simDay\",\n      modifiers: {\n        \"number\": true\n      }\n    }],\n    domProps: {\n      \"value\": (_vm.simDay)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.simDay = _vm._n($event.target.value)\n      },\n      \"blur\": function($event) {\n        _vm.$forceUpdate()\n      }\n    }\n  }), _vm._v(\" \"), _c('select', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.selectedMetric),\n      expression: \"selectedMetric\"\n    }],\n    on: {\n      \"change\": function($event) {\n        var $$selectedVal = Array.prototype.filter.call($event.target.options, function(o) {\n          return o.selected\n        }).map(function(o) {\n          var val = \"_value\" in o ? o._value : o.value;\n          return val\n        });\n        _vm.selectedMetric = $event.target.multiple ? $$selectedVal : $$selectedVal[0]\n      }\n    }\n  }, [_c('option', {\n    attrs: {\n      \"value\": \"\",\n      \"disabled\": \"\"\n    }\n  }, [_vm._v(\"Please select\")]), _vm._v(\" \"), _vm._l((_vm.metrics), function(option) {\n    return [_c('option', [_vm._v(_vm._s(option))])]\n  })], 2), _vm._v(\" \"), (_vm.selectedMetric) ? _c('a', {\n    attrs: {\n      \"href\": (_vm.apiUrl + \"/getMetric?metric=\" + (this.selectedMetric) + \"&sim=\" + (this.simId) + \"&day=\" + (this.simDay) + \"&agents=\" + (this.simAgents) + \"&step=\" + (this.simStep)),\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Download\")]) : _vm._e(), _vm._v(\" \"), _c('tradegraph', {\n    attrs: {\n      \"graphdata\": _vm.tradeGraphData,\n      \"selectednode\": _vm.selectedNode\n    },\n    on: {\n      \"nodeclicked\": _vm.handleNodeClicked,\n      \"showinfo\": _vm.handleShowInfo,\n      \"showchildren\": _vm.handleShowChildren\n    }\n  }), _vm._v(\" \"), _c('childselection', {\n    attrs: {\n      \"show\": _vm.showChildSelection,\n      \"childrenof\": _vm.childrenOf,\n      \"activenodes\": _vm.simAgents,\n      \"simulationday\": _vm.simDay,\n      \"simulationid\": _vm.simId\n    },\n    on: {\n      \"update:show\": function($event) {\n        _vm.showChildSelection = $event\n      },\n      \"setactivenodes\": _vm.handleSetActiveNodes\n    }\n  }), _vm._v(\" \"), _c('nodeinfo', {\n    attrs: {\n      \"show\": _vm.showNodeInfo,\n      \"agent\": _vm.infoOf,\n      \"simulationday\": _vm.simDay,\n      \"simulationid\": _vm.simId\n    },\n    on: {\n      \"update:show\": function($event) {\n        _vm.showNodeInfo = $event\n      }\n    }\n  })], 1) : _vm._e()])\n},staticRenderFns: []}\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('div', [_c('h2', [_vm._v(\"Info of \" + _vm._s(_vm.agent) + \" on day \" + _vm._s(_vm.simulationday))]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading ...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('div', [_c('ul', _vm._l((_vm.info), function(value, key) {\n    return _c('li', [_vm._v(_vm._s(key) + \": \" + _vm._s(value))])\n  }))]) : _vm._e(), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.closeInfo\n    }\n  }, [_vm._v(\"Close\")])]) : _vm._e()\n},staticRenderFns: []}\n\n/***/ })\n],[5]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.f36f97d29ffd3b37918e.js","export default {\n  apiURL: 'http://192.168.79.102:8080',\n  xhrConfig: {\n    mode: 'cors',\n  },\n  handleFetchErrors(response) {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response;\n  },\n  alertError(error) {\n    // eslint-disable-next-line no-alert\n    alert(error);\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","import Vue from 'vue';\nimport Router from 'vue-router';\nimport Home from '@/components/Home';\nimport Simulationview from '@/components/Simulationview';\nimport Tradeview from '@/components/Tradeview';\n\nVue.use(Router);\n\nexport default new Router({\n  mode: 'history',\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: Home,\n    },\n    {\n      path: '/simulation',\n      name: 'simulation',\n      component: Simulationview,\n    },\n    {\n      path: '/trades',\n      name: 'trades',\n      component: Tradeview,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-25441132\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-25441132\\\",\\\"hasScoped\\\":false}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 4\n// module chunks = 0","import Vue from 'vue';\nimport App from './App';\nimport router from './router';\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App),\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div id=\"app\">\n    <ul>\n      <li><router-link :to=\"{name: 'home'}\">Simulations</router-link></li>\n    </ul>\n\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app',\n};\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?6e54bc45","<template>\n  <div v-if=\"show\">\n\n    <h2>Childselection {{ childrenof }} on day {{ simulationday }}</h2>\n\n    <div v-if=\"loading\">Loading ...</div>\n\n    <div v-if=\"!loading\">\n      <ul>\n        <li v-for=\"child in children\">\n          <input type=\"checkbox\" name=\"selection\" :value=\"child\" v-model=\"activeChildren\"></input> {{ child }}\n        </li>\n      </ul>\n      <div>{{ activeNodeArray }}</div>\n    </div>\n\n    <button v-if=\"!loading\" @click=\"saveSelection\">Save</button>\n    <button @click=\"cancelSelection\">Cancel</button>\n  </div>\n</template>\n\n<script>\nimport config from '../config';\n\nexport default {\n  name: 'childrenselection',\n  props: ['show', 'childrenof', 'activenodes', 'simulationday', 'simulationid'],\n  data() {\n    return {\n      loading: true,\n      children: [],\n      selectedChildren: [],\n    };\n  },\n  computed: {\n    activeNodeArray() {\n      return this.activenodes.split(',');\n    },\n  },\n  watch: {\n    show() {\n      if (this.show) {\n        // get children\n        this.loading = true;\n\n        fetch(\n          `${config.apiURL}/children?sim=${this.simulationid}&day=${this.simulationday}&selection=${this.childrenof}`,\n          config.xhrConfig,\n        )\n        .then(config.handleFetchErrors)\n        .then(response => response.json())\n        .then(\n          (response) => {\n            // set children\n            this.children = [];\n            response.children.forEach(child => this.children.push(child.label));\n\n            // set activeChildren\n            this.activeChildren = this.children.filter(x => this.activeNodeArray.includes(x));\n\n            this.loading = false;\n          },\n        )\n        .catch(error => config.alertError(error));\n      }\n    },\n  },\n  methods: {\n    saveSelection() {\n      // construct new set of active nodes\n      // take all active nodes without children\n      let newActiveNodes = this.activeNodeArray.filter(x => !this.children.includes(x));\n      // push active children to new set\n      newActiveNodes = newActiveNodes.concat(this.activeChildren);\n\n      this.$emit('setactivenodes', newActiveNodes.join());\n\n      this.$emit('update:show', false);\n    },\n    cancelSelection() {\n      this.$emit('update:show', false);\n    },\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Childselection.vue?2ffe5be1","<template>\n  <div>\n    <h1>Simulations</h1>\n\n    <div v-if=\"loading\">Loading...</div>\n\n    <ul v-if=\"!loading\">\n      <li v-for=\"sim in simulations\">\n        <router-link :to=\"{name: 'simulation', query: {sim: sim.path}}\">{{ `${sim.owner} / ${sim.path}` }}</router-link>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport config from '../config';\n\nexport default {\n  name: 'home',\n  data() {\n    return {\n      loading: true,\n      simulations: null,\n    };\n  },\n  created() {\n    // get simulations\n    fetch(\n      `${config.apiURL}/list`,\n      config.xhrConfig,\n    )\n    .then(config.handleFetchErrors)\n    .then(response => response.json())\n    .then(\n      (response) => {\n        this.simulations = response.sims;\n        this.loading = false;\n      },\n    )\n    .catch(error => config.alertError(error));\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Home.vue?2a13f6a6","<template>\n  <div v-if=\"show\">\n\n    <h2>Info of {{ agent }} on day {{ simulationday }}</h2>\n\n    <div v-if=\"loading\">Loading ...</div>\n\n    <div v-if=\"!loading\">\n      <ul>\n        <li v-for=\"(value, key) in info\">{{ key }}: {{ value }}</li>\n      </ul>\n    </div>\n\n    <button @click=\"closeInfo\">Close</button>\n  </div>\n</template>\n\n<script>\nimport config from '../config';\n\nexport default {\n  name: 'nodeinfo',\n  props: ['show', 'agent', 'simulationday', 'simulationid'],\n  data() {\n    return {\n      loading: true,\n      info: {},\n    };\n  },\n  watch: {\n    show() {\n      if (this.show) {\n        // get children\n        this.loading = true;\n\n        fetch(\n          `${config.apiURL}/agents?sim=${this.simulationid}&day=${this.simulationday}&selection=${this.agent}`,\n          config.xhrConfig,\n        )\n        .then(config.handleFetchErrors)\n        .then(response => response.json())\n        .then(\n          (response) => {\n            this.info = response;\n            this.loading = false;\n          },\n        )\n        .catch(error => config.alertError(error));\n      }\n    },\n  },\n  methods: {\n    closeInfo() {\n      this.$emit('update:show', false);\n    },\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Nodeinfo.vue?cd41bd90","<template>\n  <div>\n    <h1>Simulation '{{ this.$route.query.sim }}'</h1>\n\n    <div v-if=\"loading\">Loading...</div>\n\n    <ul v-if=\"!loading\">\n      <li>\n        <!-- TODO insert proper simulation link on github -->\n        <a :href=\"simDescription\" target=\"_blank\">Description</a>\n      </li>\n      <li>\n        <router-link :to=\"{name: 'trades', query: {sim: this.$route.query.sim, day: 0, agents: 'consumers,firms', step: 1}}\">Tradeview</router-link>\n      </li>\n    </ul>\n\n    <ol v-if=\"!loadingRanking\">\n      <li v-for=\"rank in ranking\">\n        {{ `${rank.type}: ${rank.averageUtility}` }}\n      </li>\n    </ol>\n  </div>\n</template>\n\n<script>\nimport config from '../config';\n\nexport default {\n  name: 'simulationview',\n  data() {\n    return {\n      loading: true,\n      loadingRanking: true,\n      simDescription: '',\n      ranking: null,\n    };\n  },\n  created() {\n    // get simulation info\n    fetch(\n      `${config.apiURL}/info?sim=${this.$route.query.sim}`,\n      config.xhrConfig,\n    )\n    .then(config.handleFetchErrors)\n    .then(response => response.json())\n    .then(\n      (response) => {\n        this.simDescription = response.name;\n        this.loading = false;\n      },\n    )\n    .catch(error => config.alertError(error));\n\n    // get simulation ranking\n    fetch(\n      `${config.apiURL}/ranking?sim=${this.$route.query.sim}`,\n      config.xhrConfig,\n    )\n    .then(config.handleFetchErrors)\n    .then(response => response.json())\n    .then(\n      (response) => {\n        this.ranking = response.list;\n        this.loadingRanking = false;\n      },\n    )\n    .catch(error => config.alertError(error));\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Simulationview.vue?0fa1e8f8","<template>\n  <div>\n    <svg id=\"stage\" class=\"tradegraph\" xmlns=\"http://www.w3.org/2000/svg\"></svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\n\nexport default {\n  name: 'tradegraph',\n  props: ['graphdata', 'selectednode'],\n  data() {\n    return {\n      graph: {\n        stage: null,\n        firmNodes: null,\n        firmsTree: null,\n        firmsTreeOffset: [1000, 100],\n        firmsTreeDirection: +1,\n        consumersNodes: null,\n        consumersTree: null,\n        consumersTreeOffset: [700, 100],\n        consumersTreeDirection: -1,\n        // object that stores coordinates of all nodes\n        // used to draw links between nodes\n        nodeCoordinates: {},\n        NODE_RADIUS: 50,\n        NODE_RADIUS_BASE: 2,\n        INTER_LAYER_GAP: 50,\n        INTRA_LAYER_GAP: 10,\n        HORIZONTAL_GAP: 50,\n      },\n    };\n  },\n  mounted() {\n    this.graph.stage = d3.select('#stage');\n    this.updateTradegraph();\n  },\n  watch: {\n    graphdata() {\n      this.updateTradegraph();\n    },\n  },\n  methods: {\n    updateTradegraph() {\n      this.graph.firmNodes = this.stratifyData(this.graphdata.firms);\n      this.graph.consumerNodes = this.stratifyData(this.graphdata.consumers);\n\n      // clear and updates global nodeCoordinates\n      this.graph.nodeCoordinates = {};\n      this.calculateNodeCoordinates(this.graph.firmNodes);\n      this.calculateNodeCoordinates(this.graph.consumerNodes);\n\n      this.drawLinks(this.graphdata.edges);\n\n      this.drawNodes(this.graph.firmNodes);\n      this.drawNodes(this.graph.consumerNodes);\n    },\n    addClickToNodes() {\n      d3.selectAll('.node').on('click', el => this.$emit('nodeclicked', el.data.id));\n      d3.selectAll('.childrenselection').on('click', el => this.$emit('showchildren', el.data.id));\n      d3.selectAll('.infoselection').on('click', el => this.$emit('showinfo', el.data.id));\n    },\n    stratifyData(nodeData) {\n      // stratify data\n      const treeData = d3.stratify()\n        .id(d => d.label)\n        .parentId(d => d.parent)(nodeData);\n\n      // get nodes in hierarchical structure\n      return d3.hierarchy(treeData, d => d.children);\n    },\n    calculateNodeCoordinates(nodeData) {\n      let previousDepth = 0;\n      let layerIterator = 0;\n      let rootOffset;\n      let horizontalDistance;\n      let accumulatedLayerGap = -this.graph.INTRA_LAYER_GAP;\n\n      // check what tree we are updating and\n      // set corresponding offset and horizontal distance\n      if (nodeData.data.id === 'firms') {\n        rootOffset = this.graph.firmsTreeOffset;\n        horizontalDistance = this.graph.firmsTreeDirection * this.graph.HORIZONTAL_GAP;\n      } else if (nodeData.data.id === 'consumers') {\n        rootOffset = this.graph.consumersTreeOffset;\n        horizontalDistance = this.graph.consumersTreeDirection * this.graph.HORIZONTAL_GAP;\n      }\n\n      nodeData.descendants()\n        .forEach((d, i) => {\n          // set x coordinate\n          if (d.depth === previousDepth && i !== 0) {\n            layerIterator += 1;\n            d.data.x = rootOffset[0] + (layerIterator * horizontalDistance);\n          } else {\n            d.data.x = rootOffset[0];\n            layerIterator = 0;\n            accumulatedLayerGap += 15;\n          }\n          // set y coordinate\n          d.data.y = (this.graph.INTER_LAYER_GAP * i) + accumulatedLayerGap + rootOffset[1];\n\n          // update previousDepth\n          previousDepth = d.depth;\n\n          // update nodeCoordinates for later use\n          // in drawLinks function\n          this.graph\n            .nodeCoordinates[d.data.id] = { x: d.data.x, y: d.data.y, size: d.data.data.size };\n        });\n    },\n    drawNodes(nodeData) {\n      const self = this;\n      const type = (nodeData.data.id === 'firms' ? 'firms' : 'consumers');\n\n      // d3.selectAll(`.node--${nodeData.data.id}`).remove();\n\n      // create joins\n      const nodesJoin = this.graph.stage.selectAll(`.node--${nodeData.data.id}`)\n        .data(nodeData.descendants());\n\n      // exit join\n      nodesJoin.exit().remove();\n\n      // add group elements in enter join\n      const nodesEnterJoin = nodesJoin.enter();\n\n      const group = nodesEnterJoin\n        .append('g')\n        .attr('id', d => d.data.id)\n        .attr('class', d => `node node--${nodeData.data.id} ${(d.children ? 'branch' : 'leaf')}`);\n\n      // append node edges\n      group\n        .append('path')\n        .attr('class', 'node__edge')\n        .attr('d', (d, i) => {\n          if (i > 0) {\n            return `M 0 0 L${d.parent.data.x - d.data.x} ${d.parent.data.y - d.data.y}`;\n          }\n          return '';\n        });\n\n      // append node to node group\n      const color = d3.scaleOrdinal(d3.schemeCategory10);\n      group\n        .append('circle')\n        .attr('class', 'node__circle')\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('fill', (d, i) => color(i));\n\n      // append labels to node group\n      group\n        .append('text')\n        .attr('class', 'node__text')\n        .attr('text-anchor', () => {\n          if (type === 'firms') {\n            return 'start';\n          }\n          return 'end';\n        });\n\n      // TODO: add proper UI element to select children\n      group\n        .append('circle')\n        .attr('class', 'childrenselection')\n        .attr('r', '4px')\n        .attr('cx', '-20px')\n        .attr('cy', '-10px');\n\n      // TODO: add proper UI element to select info\n      group\n        .append('circle')\n        .attr('class', 'infoselection')\n        .attr('r', '4px')\n        .attr('cx', '-20px')\n        .attr('cy', '10px');\n\n\n      // merge enter join with update\n      // transform nodes to calculated position\n      const groupJoin = nodesJoin\n        .merge(group)\n        // classed accepts true or false as second argument\n        .classed('node--out', d => this.selectednode && d.data.id !== this.selectednode)\n        .attr('transform', d => `translate(${self.graph.nodeCoordinates[d.data.id].x},\n            ${self.graph.nodeCoordinates[d.data.id].y})`);\n\n      groupJoin\n        .select('.node__circle')\n        .transition()\n        .attr('r', d => self.graph.NODE_RADIUS_BASE * d.data.data.size);\n\n      groupJoin\n        .select('.node__text')\n        .transition()\n        .attr('dx', (d) => {\n          let offsetCoefficient = -0.5;\n          let offsetConstant = -0.5;\n          if (type === 'firms') {\n            offsetCoefficient = 0.5;\n            offsetConstant = 0.5;\n          }\n          return ((self.graph.NODE_RADIUS_BASE * d.data.data.size) * offsetCoefficient)\n            + offsetConstant;\n        })\n        .attr('dy', d => -5 + (-1 * (self.graph.NODE_RADIUS_BASE * d.data.data.size)))\n        .text(d => d.data.id);\n\n      // add click events to nodes\n      this.addClickToNodes();\n    },\n    drawLinks(links) {\n      // remove all groups and defs\n      d3.selectAll('.links__wrapper').remove();\n      d3.selectAll('defs').remove();\n\n      if (links.length > 0) {\n        let currentSource = links[0].source;\n        let currentDestination = links[0].destination;\n\n        let globalSourceX = 0;\n        let globalSourceY = 0;\n        let globalDestinationX = 0;\n        let globalDestinationY = 0;\n        let deltaX = 0;\n        let deltaY = 0;\n        let alpha = 0;\n        const xSource = 0;\n        const ySource = 0;\n        let localEdgeCount = 0;\n\n        // create initial group to append links to\n        let group = this.graph.stage.append('g')\n          .attr('class', 'links__wrapper');\n\n        // create the enter join\n        const linksJoin = group.selectAll('.link')\n          .data(links);\n\n        // exit join\n        linksJoin.exit().remove();\n\n        const linksEnterJoin = linksJoin\n          .enter();\n\n        linksJoin\n          .merge(linksEnterJoin)\n          .each((d, i) => {\n            if (d.source === currentSource && d.destination === currentDestination && i !== 0) {\n              localEdgeCount += 1;\n            } else {\n              localEdgeCount = 0;\n              // create new svg group\n              // note: first group has already been created\n              if (i !== 0) {\n                group = this.graph.stage.append('g').attr('class', 'links__wrapper');\n              }\n\n              globalSourceX = this.graph.nodeCoordinates[d.source].x;\n              globalSourceY = this.graph.nodeCoordinates[d.source].y;\n\n              globalDestinationX = this.graph.nodeCoordinates[d.destination].x;\n              globalDestinationY = this.graph.nodeCoordinates[d.destination].y;\n\n              deltaX = globalDestinationX - globalSourceX;\n              deltaY = globalDestinationY - globalSourceY;\n              let rotationCorrection = 0;\n\n              alpha = Math.atan(deltaY / deltaX) * (180 / Math.PI);\n\n              if (deltaX < 0) {\n                rotationCorrection = -180;\n              }\n              alpha += rotationCorrection;\n\n              group\n                .attr('transform', `translate(${globalSourceX}, ${globalSourceY}) rotate(${alpha})`);\n\n              currentSource = d.source;\n              currentDestination = d.destination;\n            }\n\n            const radiusSource = this.graph.NODE_RADIUS_BASE\n              * this.graph.nodeCoordinates[d.source].size || this.graph.NODE_RADIUS;\n            const radiusDestination = this.graph.NODE_RADIUS_BASE\n              * this.graph.nodeCoordinates[d.destination].size || this.graph.NODE_RADIUS;\n            const j = localEdgeCount + 2;\n            const deltaXLocal = deltaX / Math.cos(alpha * Math.PI / 180);\n            // 0.3 rad ^= 17.2 deg\n            const x0 = xSource + (radiusSource * Math.cos((localEdgeCount + 1) * 0.3));\n            const y0 = ySource - (radiusSource * Math.sin((localEdgeCount + 1) * 0.3));\n            let x1 = deltaXLocal;\n            x1 -= ((radiusDestination + 8) * Math.cos((localEdgeCount + 1) * 0.3));\n            const y1 = -(radiusDestination + 8) * Math.sin((localEdgeCount + 1) * 0.3);\n\n            const cx0 = j * x0;\n            const cx1 = (j * (x1 - deltaXLocal)) + deltaXLocal;\n            const cy0 = j * y0;\n            const cy1 = j * y1;\n\n            // append the bezier curve and marker\n            group\n              .append('path')\n              .attr('class', 'link')\n              .attr('d', `M ${x0} ${y0} C ${cx0} ${cy0}, ${cx1} ${cy1}, ${x1} ${y1}`)\n              .attr('stroke-width', `${d.weight}px`)\n              .attr('marker-end', () => 'url(#marker)');\n          });\n\n        // create reference marker\n        this.graph.stage.append('defs')\n          .append('marker')\n            .attr('id', 'marker')\n            .attr('class', 'marker')\n            .attr('viewBox', '0 -5 10 10')\n            .attr('refX', 0)\n            .attr('refY', 0)\n            .attr('markerWidth', 10)\n            .attr('markerHeight', 10)\n            .attr('orient', 'auto')\n            .attr('markerUnits', 'userSpaceOnUse')\n          .append('path')\n            .attr('d', 'M0,-5L10,0L0,5');\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"sass\">\n$blue:                                     #33ccff\n$coral:                                    #ff6557\n$green:                                    #97e582\n$grey:                                     #676767\n$light-grey:                        rgba(0,0,0,.3)\n\nbody\n  margin: 20px\n  background-color: #f0f0f0\n\nh1\n  font: bold 26px/1 Helvetica, Arial, sans-serif\n  text-transform: uppercase\n\n.tradegraph\n  width: 100%\n  height: 1000px\n  background-color: white\n\n.node\n\n  &__edge\n    stroke-width: 1px\n    opacity: .3\n\n  &__text\n    font: bold 14px/1 Helvetica, Arial sans-serif\n    text-transform: uppercase\n    fill: $grey\n\n  &--firms\n    .node\n      &__circle\n        // fill: $coral\n      &__edge\n        stroke: $coral\n\n  &--consumers\n    .node\n      &__circle\n        fill: $blue\n      &__edge\n        stroke: $blue\n\n  &--out\n    fill-opacity: .1\n    stroke-opacity: .1\n\n  &.branch\n    cursor: pointer\n    .node\n      &__circle\n        stroke-width: 2px\n    &.node\n      &--firms\n        .node\n          &__circle\n            stroke: darken($coral, 10%)\n      &--consumers\n        .node\n          &__circle\n            stroke: darken($blue, 15%)\n\n.link\n  fill: none\n  stroke: $light-grey\n  // animation: pulsate 3s\n  animation-iteration-count: infinite\n  &:hover\n    stroke: $green\n    cursor: pointer\n  &:nth-child(1)\n    animation-delay: 0.2s\n  &:nth-child(2)\n    animation-delay: 0.5s\n  &:nth-child(3)\n    animation-delay: 0.6s\n  &:nth-child(4)\n    animation-delay: 1s\n  &:nth-child(5)\n    animation-delay: 0.4s\n  &:nth-child(6)\n    animation-delay: 2.2s\n  &:nth-child(7)\n    animation-delay: 1.2s\n  &:nth-child(8)\n    animation-delay: 0.1s\n  &:nth-child(9)\n    animation-delay: 3s\n  &:nth-child(10)\n    animation-delay: 2.6s\n  &:nth-child(11)\n    animation-delay: 2s\n  &:nth-child(12)\n    animation-delay: 1.6s\n  &:nth-child(13)\n    animation-delay: 0.4s\n  &:nth-child(14)\n    animation-delay: 0.5s\n  &:nth-child(15)\n    animation-delay: 0.1s\n  &:nth-child(16)\n    animation-delay: 1.9s\n\n.marker\n  fill: $light-grey\n  stroke-width: 2px\n\n@keyframes pulsate\n  0%\n    opacity: 1\n  30%\n    opacity: .3\n  100%\n    opacity: 1\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Tradegraph.vue?06269560","<template>\n  <div>\n    <h1>Tradeview</h1>\n\n    <div v-if=\"loaded\">\n      <button v-if=\"simDay > 0\" @click=\"prevStep\"><</button>\n\n      <button v-if=\"simDay < simLength\" @click=\"nextStep\">></button>\n\n      <button v-if=\"simDay < simLength\" @click=\"playing = !playing\">{{ playing ? '||' : '|>' }}</button>\n\n      <button v-if=\"simDay > 0\" @click=\"simDay = 0\"><<</button>\n\n      <input v-model.number=\"simDay\">\n\n      <select v-model=\"selectedMetric\">\n        <option value=\"\" disabled>Please select</option>\n        <template v-for=\"option in metrics\">\n          <option>{{ option }}</option>\n        </template>\n      </select>\n      <a v-if=\"selectedMetric\" :href=\"`${apiUrl}/getMetric?metric=${this.selectedMetric}&sim=${this.simId}&day=${this.simDay}&agents=${this.simAgents}&step=${this.simStep}`\" target=\"_blank\">Download</a>\n\n      <tradegraph :graphdata=\"tradeGraphData\" :selectednode=\"selectedNode\" @nodeclicked=\"handleNodeClicked\" @showinfo=\"handleShowInfo\" @showchildren=\"handleShowChildren\"></tradegraph>\n\n      <childselection :show.sync=\"showChildSelection\" :childrenof=\"childrenOf\" :activenodes=\"simAgents\" :simulationday=\"simDay\" :simulationid=\"simId\" @setactivenodes=\"handleSetActiveNodes\"></childselection>\n\n      <nodeinfo :show.sync=\"showNodeInfo\" :agent=\"infoOf\" :simulationday=\"simDay\" :simulationid=\"simId\"></nodeinfo>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Tradegraph from '@/components/Tradegraph';\nimport Childselection from '@/components/Childselection';\nimport Nodeinfo from '@/components/Nodeinfo';\nimport config from '../config';\n\nexport default {\n  name: 'tradeview',\n  components: {\n    Tradegraph,\n    Childselection,\n    Nodeinfo,\n  },\n  data() {\n    return {\n      apiUrl: config.apiURL,\n      tradeGraphData: null,\n      loaded: false,\n      playing: false,\n      playInterval: null,\n      metrics: [\n        'ALL',\n      ],\n      selectedNode: this.$route.query.selected,\n      showNodeInfo: false,\n      infoOf: null,\n      showChildSelection: false,\n      childrenOf: null,\n      selectedMetric: '',\n      simId: this.$route.query.sim,\n      simDay: parseInt(this.$route.query.day, 10),\n      simAgents: this.$route.query.agents,\n      simStep: parseInt(this.$route.query.step, 10),\n      simLength: null,\n    };\n  },\n  created() {\n    // get simulation data\n    this.fetchData();\n\n    // get length of simulation\n    fetch(\n      `${this.apiUrl}/info?sim=${this.simId}`,\n      config.xhrConfig,\n    )\n    .then(config.handleFetchErrors)\n    .then(response => response.json())\n    .then(\n      (response) => {\n        this.simLength = response.days;\n      },\n    )\n    .catch(error => config.alertError(error));\n\n    // get download options\n    fetch(\n      `${this.apiUrl}/metrics`,\n      config.xhrConfig,\n    )\n    .then(config.handleFetchErrors)\n    .then(response => response.json())\n    .then(\n      (response) => {\n        response.metrics.forEach((element) => {\n          this.metrics.push(element);\n        });\n      },\n    )\n    .catch(error => config.alertError(error));\n  },\n  watch: {\n    // call fetchData when the route changes\n    $route: 'fetchData',\n    playing() {\n      if (this.playing) {\n        this.playInterval = setInterval(this.nextStep, 100);\n      } else {\n        clearInterval(this.playInterval);\n      }\n    },\n    simDay() {\n      this.goToNewDay();\n    },\n    simAgents() {\n      this.goToNewDay();\n    },\n  },\n  methods: {\n    nextStep() {\n      this.simDay = Math.min(this.simDay + this.simStep, this.simLength);\n      if (this.simDay === this.simLength) {\n        this.playing = false;\n      }\n    },\n    prevStep() {\n      this.simDay = Math.max(this.simDay - this.simStep, 0);\n    },\n    goToNewDay() {\n      this.$router.replace({\n        name: 'trades',\n        query: {\n          sim: this.simId,\n          day: this.simDay,\n          agents: this.simAgents,\n          step: this.simStep,\n          selected: this.selectedNode,\n        },\n      });\n    },\n    fetchData() {\n      // fetchData has all needed state data in URL\n      fetch(\n        `${this.apiUrl}/tradegraph?sim=${this.simId}&day=${this.simDay}&agents=${this.simAgents}&step=${this.simStep}`,\n        config.xhrConfig,\n      )\n      .then(config.handleFetchErrors)\n      .then(response => response.json())\n      .then(\n        (response) => {\n          this.tradeGraphData = response;\n          this.loaded = true;\n        },\n      )\n      .catch(error => config.alertError(error));\n    },\n    handleNodeClicked(node) {\n      if (this.selectedNode && this.selectedNode === node) {\n        this.selectedNode = null;\n      } else {\n        this.selectedNode = node;\n      }\n      this.goToNewDay();\n    },\n    handleShowInfo(node) {\n      this.infoOf = node;\n      this.showNodeInfo = true;\n    },\n    handleShowChildren(node) {\n      this.childrenOf = node;\n      this.showChildSelection = true;\n    },\n    handleSetActiveNodes(nodes) {\n      this.simAgents = nodes;\n    },\n  },\n};\n</script>\n\n<style lang=\"sass\">\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Tradeview.vue?3068c680","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Childselection.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5263e9e2\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Childselection.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Childselection.vue\n// module id = 17\n// module chunks = 0","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-246bbd84\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Home.vue\n// module id = 18\n// module chunks = 0","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Nodeinfo.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d4e2bbe2\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Nodeinfo.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Nodeinfo.vue\n// module id = 19\n// module chunks = 0","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Simulationview.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71f2d36a\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Simulationview.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Simulationview.vue\n// module id = 20\n// module chunks = 0","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-61dd2c09\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tradegraph.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tradegraph.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-61dd2c09\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Tradegraph.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Tradegraph.vue\n// module id = 21\n// module chunks = 0","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d219d98c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tradeview.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tradeview.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d219d98c\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Tradeview.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Tradeview.vue\n// module id = 22\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"Simulations\")]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('ul', _vm._l((_vm.simulations), function(sim) {\n    return _c('li', [_c('router-link', {\n      attrs: {\n        \"to\": {\n          name: 'simulation',\n          query: {\n            sim: sim.path\n          }\n        }\n      }\n    }, [_vm._v(_vm._s(((sim.owner) + \" / \" + (sim.path))))])], 1)\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-246bbd84\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Home.vue\n// module id = 23\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('ul', [_c('li', [_c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'home'\n      }\n    }\n  }, [_vm._v(\"Simulations\")])], 1)]), _vm._v(\" \"), _c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-25441132\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 24\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('div', [_c('h2', [_vm._v(\"Childselection \" + _vm._s(_vm.childrenof) + \" on day \" + _vm._s(_vm.simulationday))]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading ...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('div', [_c('ul', _vm._l((_vm.children), function(child) {\n    return _c('li', [_c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.activeChildren),\n        expression: \"activeChildren\"\n      }],\n      attrs: {\n        \"type\": \"checkbox\",\n        \"name\": \"selection\"\n      },\n      domProps: {\n        \"value\": child,\n        \"checked\": Array.isArray(_vm.activeChildren) ? _vm._i(_vm.activeChildren, child) > -1 : (_vm.activeChildren)\n      },\n      on: {\n        \"__c\": function($event) {\n          var $$a = _vm.activeChildren,\n            $$el = $event.target,\n            $$c = $$el.checked ? (true) : (false);\n          if (Array.isArray($$a)) {\n            var $$v = child,\n              $$i = _vm._i($$a, $$v);\n            if ($$el.checked) {\n              $$i < 0 && (_vm.activeChildren = $$a.concat($$v))\n            } else {\n              $$i > -1 && (_vm.activeChildren = $$a.slice(0, $$i).concat($$a.slice($$i + 1)))\n            }\n          } else {\n            _vm.activeChildren = $$c\n          }\n        }\n      }\n    }), _vm._v(\" \" + _vm._s(child) + \"\\n      \")])\n  })), _vm._v(\" \"), _c('div', [_vm._v(_vm._s(_vm.activeNodeArray))])]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('button', {\n    on: {\n      \"click\": _vm.saveSelection\n    }\n  }, [_vm._v(\"Save\")]) : _vm._e(), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.cancelSelection\n    }\n  }, [_vm._v(\"Cancel\")])]) : _vm._e()\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-5263e9e2\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Childselection.vue\n// module id = 25\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('svg', {\n    staticClass: \"tradegraph\",\n    attrs: {\n      \"id\": \"stage\",\n      \"xmlns\": \"http://www.w3.org/2000/svg\"\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-61dd2c09\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Tradegraph.vue\n// module id = 26\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"Simulation '\" + _vm._s(this.$route.query.sim) + \"'\")]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('ul', [_c('li', [_c('a', {\n    attrs: {\n      \"href\": _vm.simDescription,\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Description\")])]), _vm._v(\" \"), _c('li', [_c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'trades',\n        query: {\n          sim: this.$route.query.sim,\n          day: 0,\n          agents: 'consumers,firms',\n          step: 1\n        }\n      }\n    }\n  }, [_vm._v(\"Tradeview\")])], 1)]) : _vm._e(), _vm._v(\" \"), (!_vm.loadingRanking) ? _c('ol', _vm._l((_vm.ranking), function(rank) {\n    return _c('li', [_vm._v(\"\\n      \" + _vm._s(((rank.type) + \": \" + (rank.averageUtility))) + \"\\n    \")])\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-71f2d36a\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Simulationview.vue\n// module id = 27\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h1', [_vm._v(\"Tradeview\")]), _vm._v(\" \"), (_vm.loaded) ? _c('div', [(_vm.simDay > 0) ? _c('button', {\n    on: {\n      \"click\": _vm.prevStep\n    }\n  }, [_vm._v(\"<\")]) : _vm._e(), _vm._v(\" \"), (_vm.simDay < _vm.simLength) ? _c('button', {\n    on: {\n      \"click\": _vm.nextStep\n    }\n  }, [_vm._v(\">\")]) : _vm._e(), _vm._v(\" \"), (_vm.simDay < _vm.simLength) ? _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.playing = !_vm.playing\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.playing ? '||' : '|>'))]) : _vm._e(), _vm._v(\" \"), (_vm.simDay > 0) ? _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.simDay = 0\n      }\n    }\n  }, [_vm._v(\"<<\")]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model.number\",\n      value: (_vm.simDay),\n      expression: \"simDay\",\n      modifiers: {\n        \"number\": true\n      }\n    }],\n    domProps: {\n      \"value\": (_vm.simDay)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.simDay = _vm._n($event.target.value)\n      },\n      \"blur\": function($event) {\n        _vm.$forceUpdate()\n      }\n    }\n  }), _vm._v(\" \"), _c('select', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.selectedMetric),\n      expression: \"selectedMetric\"\n    }],\n    on: {\n      \"change\": function($event) {\n        var $$selectedVal = Array.prototype.filter.call($event.target.options, function(o) {\n          return o.selected\n        }).map(function(o) {\n          var val = \"_value\" in o ? o._value : o.value;\n          return val\n        });\n        _vm.selectedMetric = $event.target.multiple ? $$selectedVal : $$selectedVal[0]\n      }\n    }\n  }, [_c('option', {\n    attrs: {\n      \"value\": \"\",\n      \"disabled\": \"\"\n    }\n  }, [_vm._v(\"Please select\")]), _vm._v(\" \"), _vm._l((_vm.metrics), function(option) {\n    return [_c('option', [_vm._v(_vm._s(option))])]\n  })], 2), _vm._v(\" \"), (_vm.selectedMetric) ? _c('a', {\n    attrs: {\n      \"href\": (_vm.apiUrl + \"/getMetric?metric=\" + (this.selectedMetric) + \"&sim=\" + (this.simId) + \"&day=\" + (this.simDay) + \"&agents=\" + (this.simAgents) + \"&step=\" + (this.simStep)),\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Download\")]) : _vm._e(), _vm._v(\" \"), _c('tradegraph', {\n    attrs: {\n      \"graphdata\": _vm.tradeGraphData,\n      \"selectednode\": _vm.selectedNode\n    },\n    on: {\n      \"nodeclicked\": _vm.handleNodeClicked,\n      \"showinfo\": _vm.handleShowInfo,\n      \"showchildren\": _vm.handleShowChildren\n    }\n  }), _vm._v(\" \"), _c('childselection', {\n    attrs: {\n      \"show\": _vm.showChildSelection,\n      \"childrenof\": _vm.childrenOf,\n      \"activenodes\": _vm.simAgents,\n      \"simulationday\": _vm.simDay,\n      \"simulationid\": _vm.simId\n    },\n    on: {\n      \"update:show\": function($event) {\n        _vm.showChildSelection = $event\n      },\n      \"setactivenodes\": _vm.handleSetActiveNodes\n    }\n  }), _vm._v(\" \"), _c('nodeinfo', {\n    attrs: {\n      \"show\": _vm.showNodeInfo,\n      \"agent\": _vm.infoOf,\n      \"simulationday\": _vm.simDay,\n      \"simulationid\": _vm.simId\n    },\n    on: {\n      \"update:show\": function($event) {\n        _vm.showNodeInfo = $event\n      }\n    }\n  })], 1) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-d219d98c\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Tradeview.vue\n// module id = 28\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('div', [_c('h2', [_vm._v(\"Info of \" + _vm._s(_vm.agent) + \" on day \" + _vm._s(_vm.simulationday))]), _vm._v(\" \"), (_vm.loading) ? _c('div', [_vm._v(\"Loading ...\")]) : _vm._e(), _vm._v(\" \"), (!_vm.loading) ? _c('div', [_c('ul', _vm._l((_vm.info), function(value, key) {\n    return _c('li', [_vm._v(_vm._s(key) + \": \" + _vm._s(value))])\n  }))]) : _vm._e(), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.closeInfo\n    }\n  }, [_vm._v(\"Close\")])]) : _vm._e()\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-d4e2bbe2\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Nodeinfo.vue\n// module id = 29\n// module chunks = 0"],"sourceRoot":""}